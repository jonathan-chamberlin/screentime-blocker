<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings — Brainrot Blocker</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <a href="/" class="back-link">&larr; Dashboard</a>
      <h1>Settings</h1>
    </div>

    <div class="save-indicator" id="saveIndicator">Saved</div>

    <!-- Section 1: Idle Timeout -->
    <div class="section" id="sec-idle">
      <div class="section-header" onclick="toggleSection('sec-idle')">
        <span class="section-title">Idle Timeout</span>
        <span class="section-arrow">&#9654;</span>
      </div>
      <div class="section-body">
        <div class="form-row">
          <div>
            <div class="label">Pause timers after</div>
            <div class="desc">Timers pause when keyboard/mouse idle</div>
          </div>
          <select id="idleTimeoutSeconds" data-key="idleTimeoutSeconds"></select>
        </div>
      </div>
    </div>

    <!-- Section 3: Lists -->
    <div class="section open" id="sec-lists">
      <div class="section-header" onclick="toggleSection('sec-lists')">
        <span class="section-title">Lists</span>
        <span class="section-arrow">&#9654;</span>
      </div>
      <div class="section-body">
        <div id="listsContainer"></div>
        <button class="btn-add-list" onclick="addList()">+ New List</button>
      </div>
    </div>

    <!-- Section 3: Nuclear Block -->
    <div class="section" id="sec-nuclear">
      <div class="section-header" onclick="toggleSection('sec-nuclear')">
        <span class="section-title">☢️ Nuclear Block</span>
        <span class="section-arrow">&#9654;</span>
      </div>
      <div class="section-body">
        <p class="nuclear-desc">Sites permanently blocked — never accessible, even during breaks. Removing a site requires waiting through a cooldown you set when adding it.</p>
        <p class="nuclear-desc" style="margin-top: -8px; font-size: 12px;"><strong>How it works:</strong> Adding a site blocks it instantly — the hard part is getting it back. To remove a site, you click "Unblock" and wait through the removal cooldown. If a second confirmation cooldown is enabled, you'll need to confirm again and wait a second time.</p>

        <div class="nuclear-add-section">
          <label>Add sites to Nuclear Block</label>
          <div id="nuclearPresetsList" class="nuclear-presets"></div>

          <div style="margin-bottom: 10px;">
            <input type="text" id="nuclearCustomDomain" placeholder="or type a domain (e.g., example.com)"
              style="width:100%; background:var(--bg); color:var(--text); border:1px solid var(--border); border-radius:6px; padding:7px 10px; font-size:13px;"
              onkeydown="if(event.key==='Enter'){event.preventDefault();addNuclearSiteFromUI()}">
          </div>

          <div style="margin-bottom: 10px;">
            <label style="font-size: 11px; margin-bottom: 4px;">Path exceptions (allowed despite nuclear block)</label>
            <div class="exception-add-row">
              <input type="text" id="nuclearExceptionInput" placeholder="youtube.com/@Veritasium"
                style="background:var(--bg); color:var(--text); border:1px solid var(--border); border-radius:6px; padding:6px 10px; font-size:13px;"
                onkeydown="if(event.key==='Enter'){event.preventDefault();addNuclearException()}">
              <button onclick="addNuclearException()"
                style="background:var(--accent); color:white; border:none; border-radius:6px; padding:6px 14px; font-size:13px; cursor:pointer; font-weight:600;">Add</button>
            </div>
            <div id="nuclearExceptionChips" style="display:flex; flex-wrap:wrap; gap:4px; min-height:0;"></div>
          </div>

          <div class="nuclear-add-row">
            <div class="form-group">
              <label>Removal cooldown</label>
              <select id="nuclearCooldown">
                <option value="10000">⚠ 10s (test)</option>
                <option value="3600000">1 hour</option>
                <option value="7200000">2 hours</option>
                <option value="14400000">4 hours</option>
                <option value="28800000">8 hours</option>
                <option value="43200000">12 hours</option>
                <option value="86400000">24 hours</option>
                <option value="172800000" selected>48 hours</option>
                <option value="259200000">3 days</option>
                <option value="432000000">5 days</option>
                <option value="604800000">1 week</option>
                <option value="1209600000">2 weeks</option>
                <option value="2592000000">1 month</option>
                <option value="5184000000">2 months</option>
                <option value="7776000000">3 months</option>
                <option value="15552000000">6 months</option>
                <option value="31536000000">1 year</option>
              </select>
            </div>
            <div class="form-group">
              <label>Confirmation cooldown</label>
              <select id="nuclearSecondCooldown">
                <option value="5000">⚠ 5s (test)</option>
                <option value="600000">10 minutes</option>
                <option value="1200000">20 minutes</option>
                <option value="3600000">1 hour</option>
                <option value="7200000">2 hours</option>
                <option value="14400000">4 hours</option>
                <option value="28800000">8 hours</option>
                <option value="43200000">12 hours</option>
                <option value="64800000" selected>18 hours</option>
                <option value="86400000">24 hours</option>
                <option value="129600000">36 hours</option>
                <option value="172800000">48 hours</option>
                <option value="259200000">3 days</option>
                <option value="432000000">5 days</option>
                <option value="604800000">1 week</option>
                <option value="1209600000">2 weeks</option>
                <option value="2592000000">1 month</option>
                <option value="0">Off</option>
              </select>
            </div>
            <button class="btn-nuclear-add" onclick="addNuclearSiteFromUI()">Add to Nuclear Block</button>
          </div>
          <div id="nuclearCooldownTestWarning" class="nuclear-test-warning">⚠ Testing mode — cooldown expires in seconds. Switch to a real duration before using seriously.</div>
        </div>

        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,140,0,0.1);">
          <label style="display:block; color:var(--text-muted); font-size:12px; margin-bottom:8px; font-weight:500; text-transform:uppercase; letter-spacing:0.5px;">Currently nuclear-blocked sites</label>
          <div id="nuclearSitesList"><p class="nuclear-empty">No sites added yet.</p></div>
        </div>
      </div>
    </div>

    <!-- Section 7: Advanced -->
    <div class="section" id="sec-advanced">
      <div class="section-header" onclick="toggleSection('sec-advanced')">
        <span class="section-title">Advanced</span>
        <span class="section-arrow">&#9654;</span>
      </div>
      <div class="section-body">
        <div class="form-row">
          <div>
            <div class="label">Reset All Settings</div>
            <div class="desc">Restore defaults (nuclear blocks preserved)</div>
          </div>
          <button class="btn-danger" onclick="resetSettings()">Reset</button>
        </div>
      </div>
    </div>
  </div>

  <script src="settings.js"></script>
</body>
</html>
